<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Rose Day My Love | Spaced Circular Bouquet</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <style>
        :root {
            --rose-red: #d90429;
            --rose-pink: #ef233c;
            --bg-gradient: radial-gradient(circle, #ffe6eb 0%, #ffc0cb 100%);
            --text-color: #590d22;
            --glass-bg: rgba(255, 255, 255, 0.4);
            --glass-border: rgba(255, 255, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-gradient);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
            position: relative;
        }

        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .background-heart {
            position: absolute;
            color: rgba(255, 255, 255, 0.6);
            animation: floatUp linear infinite;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) scale(0.5);
                opacity: 0;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                transform: translateY(-10vh) scale(1.2);
                opacity: 0;
            }
        }

        header {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            width: 100%;
            pointer-events: none;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2rem, 8vw, 3.5rem);
            color: var(--rose-red);
            text-shadow: 2px 2px 8px rgba(255, 255, 255, 0.8);
            animation: fadeIn 2s ease;
            white-space: nowrap;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-box {
            position: absolute;
            bottom: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(214, 51, 77, 0.2);
            z-index: 10;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid var(--glass-border);
        }

        .message-box.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .message-text {
            color: var(--text-color);
            font-size: 1.2rem;
            font-weight: 600;
            line-height: 1.4;
        }

        .music-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(5px);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            z-index: 100;
            font-size: 1.5rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-btn:hover {
            transform: scale(1.1) rotate(15deg);
            background: rgba(255, 255, 255, 0.6);
        }

        #sc-player {
            position: absolute;
            left: -9999px;
            width: 1px;
            height: 1px;
        }

        .click-hint {
            position: absolute;
            top: 140px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-color);
            font-size: 1.1rem;
            font-weight: 600;
            z-index: 10;
            animation: pulse 2s infinite;
            background: var(--glass-bg);
            padding: 10px 20px;
            border-radius: 30px;
            backdrop-filter: blur(5px);
            text-align: center;
            width: max-content;
        }

        @keyframes pulse {
            0% {
                transform: translateX(-50%) scale(1);
                opacity: 0.7;
            }

            50% {
                transform: translateX(-50%) scale(1.05);
                opacity: 1;
            }

            100% {
                transform: translateX(-50%) scale(1);
                opacity: 0.7;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            .message-text {
                font-size: 1rem;
            }

            header {
                top: 20px;
            }

            .click-hint {
                top: 100px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>

    <div id="canvas-container"></div>
    <button class="music-btn" id="musicToggle">üé∂</button>
    <iframe id="sc-player" scrolling="no" frameborder="no" allow="autoplay"
        src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/leolauj2012/yung-kai-blue-lyrics-mp3&color=%23ff5500&auto_play=false&hide_related=true&show_comments=false&show_user=false&show_reposts=false&show_teaser=false">
    </iframe>

    <header>
        <h1>Happy Rose Day, My Love üåπ</h1>
    </header>

    <div class="click-hint" id="hint">Click the bouquet to unwrap your love! üéÅ</div>

    <div class="message-box" id="msgBox">
        <p class="message-text" id="msgText"></p>
    </div>

    <script>
        const messages = [
            "I lovee youu bujii agent ‚ù§Ô∏èüåπ",
            "You are the best human in the whole world üåçüíñ",
            "Cutest bujii agent with the most beautiful face üòç‚ú®",
            "Your black deep eyes, deep as the ocean üåäüñ§üëÄ",
            "That cute bujii nose that always makes warm rubs with my nose ü§çü•∞",
            "Your soft, tangling, cute meesalu üòöüíû",
            "Your pink, flushy cute lips that make the sweetest smile üòä",
            "Finally, my cutest kidnap uncle ‚Äî the one I want a lifetime kidnap with üíó"
        ];

        let scene, camera, renderer, raycaster, mouse;
        let bouquet = [], wrapper;
        let hasUnwrapped = false;
        let roseTexture;

        const msgBox = document.getElementById('msgBox');
        const msgText = document.getElementById('msgText');

        function createRoseTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');

            function drawCircularPetal(angle, size, color) {
                ctx.save();
                ctx.translate(256, 256);
                ctx.rotate(angle);

                const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, size * 1.5);
                grad.addColorStop(0, color);
                const darkColor = new THREE.Color(color).clone().multiplyScalar(0.7).getStyle();
                grad.addColorStop(1, darkColor);

                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.bezierCurveTo(size * 1.2, -size * 0.8, size * 1.2, size * 0.8, 0, size * 1.2);
                ctx.bezierCurveTo(-size * 1.2, size * 0.8, -size * 1.2, -size * 0.8, 0, 0);

                ctx.fillStyle = grad;
                ctx.fill();
                ctx.restore();
            }

            const layers = [
                { count: 18, size: 160, color: '#660708' },
                { count: 15, size: 140, color: '#a4161a' },
                { count: 12, size: 120, color: '#ba181b' },
                { count: 10, size: 100, color: '#e5383b' },
                { count: 8, size: 80, color: '#f07167' },
                { count: 6, size: 60, color: '#ff4d6d' },
                { count: 1, size: 25, color: '#ffb3c1' }
            ];

            layers.forEach((layer, lIdx) => {
                for (let i = 0; i < layer.count; i++) {
                    const angle = (i / layer.count) * Math.PI * 2 + (lIdx * 0.4);
                    drawCircularPetal(angle, layer.size, layer.color);
                }
            });

            const centerGrad = ctx.createRadialGradient(256, 256, 0, 256, 256, 40);
            centerGrad.addColorStop(0, 'rgba(255, 255, 255, 0.3)');
            centerGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');
            ctx.fillStyle = centerGrad;
            ctx.fillRect(216, 216, 80, 80);

            const tex = new THREE.CanvasTexture(canvas);
            tex.anisotropy = 16;
            return tex;
        }

        class RoseModel {
            constructor(id, position, rotation) {
                this.id = id;
                this.basePos = position.clone();
                this.group = new THREE.Group();
                this.group.position.copy(position);
                this.group.position.y -= 8;
                this.group.rotation.copy(rotation);

                this.popping = false;
                this.popProgress = 0;

                this.init();
                scene.add(this.group);
            }

            init() {
                const stemGeometry = new THREE.CylinderGeometry(0.04, 0.1, 16, 12);
                const stemMaterial = new THREE.MeshStandardMaterial({ color: 0x1b4332, roughness: 1 });
                const stem = new THREE.Mesh(stemGeometry, stemMaterial);
                stem.position.y = -8;
                this.group.add(stem);

                this.addLeaf(-0.6, -4, 0.7, 1);
                this.addLeaf(0.6, -6, -0.7, 0.9);

                const spriteMaterial = new THREE.SpriteMaterial({
                    map: roseTexture,
                    transparent: true,
                    opacity: 1
                });
                this.flower = new THREE.Sprite(spriteMaterial);
                this.flower.scale.set(0, 0, 1);
                this.flower.position.y = 0;
                this.flower.userData = { roseId: this.id };
                this.group.add(this.flower);
            }

            addLeaf(x, y, rot, scale) {
                const shape = new THREE.Shape();
                shape.moveTo(0, 0);
                shape.quadraticCurveTo(0.7, 0.7, 0, 1.4);
                shape.quadraticCurveTo(-0.7, 0.7, 0, 0);
                const geo = new THREE.ShapeGeometry(shape);
                const mat = new THREE.MeshStandardMaterial({ color: 0x2d6a4f, side: THREE.DoubleSide });
                const leaf = new THREE.Mesh(geo, mat);
                leaf.position.set(0, y, 0);
                leaf.rotation.z = rot;
                leaf.scale.setScalar(scale);
                this.group.add(leaf);
            }

            pop() {
                this.popping = true;
            }

            update(dt) {
                if (this.popping) {
                    this.popProgress = Math.min(this.popProgress + dt * 1.1, 1);
                    const easeOut = 1 - Math.pow(1 - this.popProgress, 4);
                    this.group.position.y = (this.basePos.y - 8) + easeOut * 9.5;

                    const flowerScale = Math.min(this.popProgress * 2, 1);
                    const bloomScale = 4.5;
                    this.flower.scale.set(flowerScale * bloomScale, flowerScale * bloomScale, 1);
                }
            }
        }

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 12, 28);
            camera.lookAt(0, 6, 0);

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            scene.add(new THREE.AmbientLight(0xffffff, 1.3));
            const spotlight = new THREE.SpotLight(0xffffff, 1.2);
            spotlight.position.set(20, 30, 20);
            scene.add(spotlight);

            roseTexture = createRoseTexture();

            createWrapper();
            createBouquet();

            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            const clock = new THREE.Clock();
            function animate() {
                requestAnimationFrame(animate);
                const dt = clock.getDelta();
                bouquet.forEach(rose => rose.update(dt));
                if (wrapper) {
                    wrapper.rotation.y += 0.002;
                    wrapper.position.y = -3.5 + Math.sin(performance.now() * 0.001) * 0.4;
                }
                renderer.render(scene, camera);
            }
            animate();

            window.addEventListener('resize', onWindowResize, false);
            window.addEventListener('click', onInteract, false);
            window.addEventListener('touchstart', onInteract, false);
        }

        function createWrapper() {
            const geometry = new THREE.CylinderGeometry(8, 2, 18, 32, 1, true); // Widen top to 8
            const material = new THREE.MeshStandardMaterial({
                color: 0xfaedcd,
                side: THREE.DoubleSide,
                roughness: 1,
                transparent: true,
                opacity: 0.98
            });
            wrapper = new THREE.Mesh(geometry, material);
            wrapper.position.y = -3.5;
            scene.add(wrapper);

            const ribbonGeo = new THREE.TorusGeometry(3.5, 0.25, 12, 40);
            const ribbonMat = new THREE.MeshStandardMaterial({ color: 0xd90429, roughness: 0.2 });
            const ribbon = new THREE.Mesh(ribbonGeo, ribbonMat);
            ribbon.rotation.x = Math.PI / 2;
            ribbon.position.y = -7;
            wrapper.add(ribbon);
        }

        function createBouquet() {
            const count = messages.length;
            const radius = 4.8; // Increased radius for space between them
            for (let i = 0; i < count; i++) {
                const angle = (i / count) * Math.PI * 2;
                const x = Math.cos(angle) * radius;
                const z = Math.sin(angle) * radius;
                const pos = new THREE.Vector3(x, 8 + Math.random() * 1.5, z);
                const rot = new THREE.Euler((Math.random() - 0.5) * 0.3, -angle, (Math.random() - 0.5) * 0.3);
                bouquet.push(new RoseModel(i, pos, rot));
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onInteract(event) {
            const x = event.clientX || (event.touches && event.touches[0].clientX);
            const y = event.clientY || (event.touches && event.touches[0].clientY);
            if (x === undefined || y === undefined) return;

            mouse.x = (x / window.innerWidth) * 2 - 1;
            mouse.y = -(y / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);

            const wrapperIntersects = raycaster.intersectObject(wrapper);
            if (wrapperIntersects.length > 0 && !hasUnwrapped) {
                unwrap();
                return;
            }

            const allFlowers = bouquet.map(r => r.flower);
            const intersects = raycaster.intersectObjects(allFlowers);
            if (intersects.length > 0) {
                const roseId = intersects[0].object.userData.roseId;
                displayMessage(roseId);
                popPulse(roseId);
            }
        }

        function unwrap() {
            hasUnwrapped = true;
            document.getElementById('hint').style.display = 'none';
            bouquet.forEach((rose, i) => {
                setTimeout(() => {
                    rose.pop();
                    displayMessage(i);
                }, i * 1100);
            });
        }

        function displayMessage(id) {
            msgBox.classList.remove('visible');
            setTimeout(() => {
                msgText.innerText = messages[id];
                msgBox.classList.add('visible');
            }, 100);
        }

        function popPulse(id) {
            const rose = bouquet[id];
            const originalScale = rose.flower.scale.clone();
            rose.flower.scale.multiplyScalar(1.3);
            setTimeout(() => rose.flower.scale.copy(originalScale), 250);
        }

        const musicBtn = document.getElementById('musicToggle');
        const scPlayer = SC.Widget(document.getElementById('sc-player'));
        let isPlaying = false;
        musicBtn.addEventListener('click', () => {
            scPlayer.toggle();
            isPlaying = !isPlaying;
            musicBtn.innerText = isPlaying ? "üîá" : "üé∂";
        });

        function createHearts() {
            const el = document.createElement('div');
            el.innerText = ['‚ù§Ô∏è', 'üåπ', '‚ú®', 'üíñ'][Math.floor(Math.random() * 4)];
            el.className = 'background-heart';
            el.style.left = Math.random() * 100 + 'vw';
            el.style.fontSize = (Math.random() * 15 + 15) + 'px';
            el.style.animationDuration = (Math.random() * 4 + 8) + 's';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 12000);
        }
        setInterval(createHearts, 1200);

        init();
    </script>
</body>

</html>